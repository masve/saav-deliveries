<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>Social Data Analysis 2016</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="styles/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="styles/cayman.css">

  <script type="text/javascript" src="bower_components/d3/d3.min.js"></script>
  <script type="text/javascript" src="bower_components/lodash/lodash.js"></script>
  <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>

  <script>
    //Check for ES 6 support, and alert user if his browser does not support it.
   (function(document) {
      "use strict";
      try { eval("var foo = (x)=>x+1"); }
      catch (e) { alert('This page uses modern javascript, that your browser does not support.\nPlease use a modern browser to display this properly.') }
   })();
  </script>
</head>
<body>
  <span id="browser-sync-binding"></span>

  <section class="page-header">
    <h1 class="project-name">Social Data Analysis 2016</h1>
    <h2 class="project-tagline">[COOL TAG-LINE GOES HERE]</h2>
    <a href="https://github.com/masve/saav-deliveries" class="btn">View on GitHub</a>
    <a href="ass2.html" class="btn">Assignment 2</a>
    <a href="#project" class="btn">Project Assignment A &amp; B</a>
  </section>

  <section id="intro" class="main-content">
    <p>
      This page is to represent the work related to assignements for course Social Data Analysis and Visualization.
    </p>
    <p>
      These exercises has been performed by DTU students:
      <ul class="task-list">
        <li><a href="https://www.campusnet.dtu.dk/cnnet/participants/showperson.aspx?id=147236">s113627</a> Casper Clemmensen</li>
        <li><a href="https://www.campusnet.dtu.dk/cnnet/participants/showperson.aspx?id=209126">s146893</a> Kasper Hoa Quoc Duong</li>
        <li><a href="https://www.campusnet.dtu.dk/cnnet/participants/showperson.aspx?id=147192">s113604</a> Mark Ian Svennningsen</li>
      </ul>
    </p>
    <p>
      <i>
        Please use the above buttons to navigate the assignments.
      </i>
    </p>
  </section>

  <section id="assignment2" class="main-content">
    <h1>Assignment 2</h1>
    <h2>Assignment 2A: Simple SVG stuff</h2>
    <blockquote>
      <p>
        Put something simple on the web. For this exercise, I want you to modify a bit of code from IDV Chapter 5.
      </p>
      <ul class="task-list">
        <li>
          Create an new version of the 5 SVG squares in example 3-22. Make the following modifications
        </li>
        <ul class="task-list">
          <li>
            Add a gray boundary of width 2 around each square.
          </li>
          <li>
            Make the squares increasingly transparant from left to right.
          </li>
          <li>
            Make the squares 80 by 80 instead of 30 by 30.
          </li>
          <li>
            Make the squares go from bottom of the SVG element to the top instead of the other way around.
          </li>
        </ul>
      </ul>
    </blockquote>

    <link rel="stylesheet" href="styles/ass2a.css">

    <svg id="ass2asvg" width="600" height="200">
      <rect x="30" y="60" width="80" height="80" fill="purple" stroke="grey" stroke-width="2" fill-opacity="1"/>
      <rect x="60" y="50" width="80" height="80" fill="blue" fill="purple" stroke="grey" stroke-width="2" fill-opacity="0.8"/>
      <rect x="90" y="40" width="80" height="80" fill="green" fill="purple" stroke="grey" stroke-width="2" fill-opacity="0.6"/>
      <rect x="120" y="30" width="80" height="80" fill="yellow" fill="purple" stroke="grey" stroke-width="2" fill-opacity="0.4"/>
      <rect x="150" y="20" width="80" height="80" fill="red" fill="purple" stroke="grey" stroke-width="2" fill-opacity="0.2"/>
    </svg>

    <button id="ass2apartybtn">PARTY!!!</button>

    <script>
      (function(document) {
        'use strict';

        let dataset = [ 5, 10, 15, 20, 25 ];
        let party = false;

        d3.select("#ass2asvg").selectAll("p")
        .data(dataset)
        .enter()
        .append("p")
        .text(function(d) {
          return "I can count up to " + d;
        })
        .style("color", d => d > 15 ? "red" : "black")

        d3.select("#ass2apartybtn")
        .on('click', e => {
          if (!party) {
            party = true;
            d3.select("#ass2asvg").selectAll("rect")
            .classed("ass2svg", party);
          } else {
            party = false;
            d3.select("#ass2asvg").selectAll("rect")
            .classed("ass2svg", party);
          }
        });
      })();
    </script>





    <h2>Assignment 2B: One scatter plot and two datasets</h2>
    <h2>Assignment 2C: One barchart and (at least) two datasets</h2>

    <h2>Assignment 2D: Visualizing geodata</h2>
    <section>
      <div>
        <blockquote>
          For this final sub-assignment we will visualize your results from the KK-means exercise from week 5.
          <ul>
            <li>We try our luck with an geospatial visualization displaying results for K=2,â€¦,6. The overall idea is each value of KK has an associated view (you should be able to toggle between these) where each of the KK centroids is shown as a large colored dot (you choose the color scheme), and all GPS points belonging to that centroid are colored using a related RGB value. My plot looks like this.</li>
            <li>Also please add a link to your IPython notebook containing only the solution to the KK-means exercise from week 5 so we can check it out, if necessary.</li>
          </ul>
        </blockquote>




        <p>
          Below we visualize prostituions in San Francisco. The data visulization shows each an evey of crime of this type from 2003 to 2015.

          The data set is divided in buckets, that are defined by the K-nearest neighbors. Additionally we also show the centroids, that are the center of the given bucket.
          The datasets used in this visuliaztion can be found <a href="">here</a>
        </p>
      </div>


      <p>Here you can choose the differnet sizes of <b>K</b></p>
      <button data-k="2" class="btn btn-color">K2</button>
      <button data-k="3" class="btn btn-color">K3</button>
      <button data-k="4" class="btn btn-color">K4</button>
      <button data-k="5" class="btn btn-color">K5</button>
      <button data-k="6" class="btn btn-color">K6</button>

      <svg id="ass2d"></svg>

      <script>
      (function(document) {
        'use strict';

        //We defined some magic sizes
        const h = 800;
        const w = 600;

        //We define some colors that we like, that we use use in our buckets
        const colorMap = {
          0: 'green',
          1: 'blue',
          2: 'red',
          3: 'yellow',
          4: 'orange',
          5: 'purple'
        }
        //Set the size of our svg
        const svg = d3.select('svg#ass2d').attr({
          'height': h + 100,
          'width': w + 100
        });

        //Create a mercator project, with the center just over San Francisco bay
        const projection = d3.geo.mercator()
                           .center([-122.4442, 37.7652])
                           .translate([w/2, h/2])
                           .scale([200000]);

         const path = d3.geo.path()
                       .projection(projection);

        const group1 = svg.append('g');
        const group2 = svg.append('g');
        const group3 = svg.append('g');

        //We defined the color of the districts, when not hovered
        const districtColor = 'rgb(129,145,152)'

        //Define some variable that we can place our data, into so that we do not need to read the file again
        let centers;

        d3.json('datasets/2d/sf_pd_districts.geojson', distict => {

            group1.selectAll("path")
                 .data(distict.features)
                 .enter()
                 .append("path")
                 .attr({
                  "d": path,
                  'fill': districtColor,
                  'stroke-width': 2,
                  stroke: "white"
                 })
                 .on('mouseover', function() {
                   // Added hover effect
                   d3.select(this)
                   .attr('fill', districtColor)
                   .transition()
                    .attr('fill', 'rgb(200,200,200)')
                 })
                 .on('mouseout', function() {
                   //Remove the hover effect
                   d3.select(this).transition()
                     .attr('fill', districtColor)
                 })
                 .append('title')
                 .text(e => e.properties['DISTRICT']); // Add tool tip, containg district name


            //Read the cvs file containing all the crimes
            d3.csv('datasets/2d/week_8_vis_1.csv', crimes => {
              //Draw all the crimes (this is requires heavy load)
              group2.selectAll("circle")
                .data(crimes)
                .enter()
                .append('circle')
                .attr({
                  cx: e => projection([e.X, e.Y])[0],
                  cy: e => projection([e.X, e.Y])[1],
                  r: 2,
                  fill: e => colorMap[e.K3]
                })
                .style('pointer-events', 'none');// Avoid eating the pointer events
            });
            // Load the file containg all the centoids
            d3.json('datasets/2d/centers_week8.json', c => {
              // Store the cetroids for lates use.
              centers = c;
              //Draw the default centoid
              group3.selectAll('circle')
                .data(centers['3'])
                .enter()
                .append('circle')
                .attr({
                  cx: e => projection(e)[0],
                  cy: e => projection(e)[1],
                  r: 10,
                  fill: (e,i) => colorMap[i],
                  stroke: 'white',
                  'stroke-width': 3
                })
                .style('pointer-events', 'none')
            });

        })

        // Add event listenere to the buttons.
        d3.select('body').selectAll('button').on('click', function () {
          //Update the color
          group2.selectAll("circle")
            .attr({
              fill: e => colorMap[e['K' + this.attributes['data-k'].value]]
            }).style('pointer-events', 'none');

            group3.selectAll('circle').remove(); // The data sets does not contain the same amount of data points, so we remove the old ones.

            const c = centers[this.attributes['data-k'].value];
            //Drwa the new centoids
            group3.selectAll('circle')
              .data(c)
              .enter()
              .append('circle')
              .attr({
                cx: e => projection(e)[0],
                cy: e => projection(e)[1],
                r: 0,
                fill: (e,i) => colorMap[i],
                stroke: 'white',
                'stroke-width': 3
              })
              .style('pointer-events', 'none')
              .transition()
              .ease('linear')
              .delay( (d, i) => i / c.length * 800)
              .attr( {
                r: 10 // With some fanzy transitions
              });

        });

        })();


      </script>
    </section>
  </section>

  <section id="project" class="main-content">
    <h1>Project Assignment A &amp; B</h1>
    <i>To be continued.</i>
  </section>

  <section id="info" class="main-content">
    <footer class="site-footer">
      <span class="site-footer-owner">For DTU course <a href="http://www.kurser.dtu.dk/courses/02806/default.aspx?menulanguage=en-GB">Social Data Analysis and Visualization</a> in relation to assignments described by <a href="https://github.com/suneman/socialdataanalysis2016/wiki/Assignments">suneman</a>.</span>
      <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
    </footer>
  </section>
  <script>
  $(function() {
    $('a[href*="#"]:not([href="#"])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html, body').animate({
            scrollTop: target.offset().top
          }, 1000);
          return false;
        }
      }
    });
  });
  </script>
</body>
</html>
